<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>FIT Route Converter</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <link rel="stylesheet" href="css/fit-route.css">
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="navbar-brand">FIT Route Converter</div>
  </nav>

  <main role="main" class="container-fluid" id="main">
    <div class="p-3">
      <p>A browser based application to convert a GPX file into a FIT file.</p>
      <noscript>
        <div class="alert alert-danger">
          This application requires a browser with JavaScript enabled, and supporting ES modules.
        </div>
      </noscript>
      <error-message v-bind="error"></error-message>
      <fit-route @success="onSuccess" @warning="onWarning" @error="onError"></fit-route>
    </div>
  </main>
</body>

<script src="https://cdn.jsdelivr.net/npm/vue@2.5.22/dist/vue.min.js" integrity="sha384-/akamCRnflySW3CYATb1tG4cZUVrkVT2+s6Q150JJNJ4mv8nhvL/V7rPgmzX8scM" crossorigin="anonymous" defer></script>
<script nomodule type="text/javascript" src="js/nomodule.js" defer></script>
<script type="module" src="js/app.js" defer></script>

<script type="text/x-template" id="error-message-template">
  <div role="alert" v-if="message" :class="cssClass">{{ message }}</div>
</script>

<script type="text/x-template" id="empty-template">
</script>

<script type="text/x-template" id="file-upload-template">
  <form enctype="multipart/form-data" novalidate>
    <div class="file-upload d-flex justify-content-center align-items-center border bg-light w-75 mx-auto">
      <input v-if="!file" type="file" title=" " accept=".gpx,application/gpx+xml" @change="onFilesChange($event.target.files)">
      <div v-if="!file" class="h4 font-weight-normal">
        Drop GPX here or click to browse
      </div>
      <div v-else d-flex justify-content-center align-items-center>
        <div class="text-center">{{ file.name }}</div>
        <div class="d-flex justify-content-around">
          <button type="button" class="btn btn-secondary m-2" @click.prevent="onCancel">Cancel</button>
          <button type="button" class="btn btn-primary m-2" @click.prevent="onSubmit">Submit</button>
        </div>
      </div>
    </div>
  </form>
</script>

<script type="text/x-template" id="fit-route-template">
  <file-upload v-if="!gpxFile" @submit="onFileUpload"></file-upload>
</script>

</html>
